
; Lesson7t4.s    balls

;    In this listing, we make a series of moving balls
;    reusing the 4 sprites ‘attached’ 11 times each, for a total
;    of 44 balls.
;	Each of the attached sprites is reused to form a
;    ‘layer’ of stars with the same speed, so there are
;    4 different scrolling speeds.
;    For example, the smallest and slowest stars, which appear to be the
;    furthest away, are all made by reusing the attached sprite 4,
;    i.e. formed by sprites 6 and 7 attached.


SECTION    CiriCop,CODE

Start:
move.l	4.w,a6        ; Execbase
jsr    -$78(a6)    ; Disable
lea    GfxName(PC),a1    ; Lib name
jsr    -$198(a6)    ; OpenLibrary
move.l    d0,GfxBase
move.l    d0,a6
move.l    $26(a6),OldCop


MOVE.L    #BITPLANE,d0
LEA    BPLPOINTERS,A1
move.w    d0,6(a1)
swap    d0
move.w    d0,2(a1)

;    Point to the sprites

MOVE.L    #SPRITE0,d0        ; sprite address in d0
LEA    SpritePointers,a1    ; Pointers in copperlist
move.w    d0,6(a1)
swap    d0
move.w    d0,2(a1)

;    Point all 8 sprites, since we use them all to make
;    4 attached sprites, which form the 4 ‘levels’ of stars at
;    different speeds

MOVE.L    #SPRITE1,d0
addq.w	#8,a1
move.w	d0,6(a1)
swap	d0
move.w	d0,2(a1)

MOVE.L    #SPRITE2,d0
addq.w    #8,a1
move.w    d0,6(a1)
swap    d0
move.w    d0,2(a1)

MOVE.L	#SPRITE3,d0
addq.w    #8,a1
move.w    d0,6(a1)
swap    d0
move.w    d0,2(a1)

MOVE.L    #SPRITE4,d0
addq.w    #8,a1
move.w    d0,6(a1)
swap d0
move.w d0,2(a1)

MOVE.L #SPRITE5,d0
addq.w #8,a1
move.w d0,6(a1)
swap d0
move.w d0,2(a1)

MOVE.L    #SPRITE6,d0
addq.w    #8,a1
move.w    d0,6(a1)
swap    d0
move.w    d0,2(a1)

MOVE.L    #SPRITE7,d0
addq.w    #8,a1
move.w    d0,6(a1)
swap    d0
move.w    d0,2(a1)

move.l    #COPPERLIST,$dff080    ; our COP
move.w    d0,$dff088        ; START COP
move.w    #0,$dff1fc		; NO AGA!
move.w    #$c00,$dff106        ; NO AGA!

mouse:
cmpi.b    #$ff,$dff006    ; Line 255?
bne.s    mouse

bsr.s    MoveSprites_01    ; this routine moves sprites 0 and 1
; attached, i.e. the large balls with
; maximum speed: 8 pixels at a time

bsr.s    MoveSprites_23    ; this routine moves sprites 2 and 3
; attached, i.e. the large balls with
; a speed of 6 pixels at a time

bsr.w	MoveSprites_45    ; this routine moves sprites 4 and 5
; attached, i.e. the medium-sized
; balls with medium speed (4 pixels at a time)

bsr.w	MoveSprites_67    ; this routine moves sprites 6 and 7
; attached, i.e. the slowest
; and smallest balls (moved 2 pixels at a time)

Wait:
cmpi.b    #$ff,$dff006    ; line 255?
beq.s	Wait

btst    #6,$bfe001    ; mouse pressed?
bne.s    mouse

move.l    OldCop(PC),$dff080    ; Point to the system cop
move.w    d0,$dff088        ; start the old cop

move.l    4.w,a6
jsr    -$7e(a6)    ; Enable
move.l    gfxbase(PC),a1
jsr    -$19e(a6)    ; Closelibrary
rts

;    Data

GfxName:
dc.b    ‘graphics.library’,0,0

GfxBase:
dc.l    0

OldCop:
dc.l    0

; This routine moves sprites 0 and 1, which are attached, so they must
; have the same coordinates.

MoveSprites_01:
lea	Sprite0,a0    ; sprite address 0
lea    Sprite1,a1    ; sprite address 1
moveq    #11-1,d7    ; number of times the sprite is used
loop01:
addq.b    #4,1(a0)    ; move sprite 0
 8 pixels to the right; acting on its HSTART
addq.b    #4,1(a1)    ; move sprite 1 8 pixels to the right
; acting on its HSTART
lea    68(a0),a0    ; coordinates for next reuse of sprite 0
lea    68(a1),a1    ; coordinates for next reuse of sprite 1
dbra    d7,loop01 ; loop
rts

; This routine moves sprites 2 and 3, which are attached, so they must
; have the same coordinates.

MoveSprites_23:
lea    Sprite2,a0    ; sprite address 2
lea    Sprite3,a1    ; sprite address 3
moveq    #11-1,d7    ; number of times the sprite is used
loop23:
addq.b    #3,1(a0)    ; move sprite 2 6 pixels to the right
; acting on its HSTART
addq.b    #3,1(a1)    ; move sprite 3
 6 pixels to the right
; acting on its HSTART
lea    68(a0),a0    ; coordinates for next reuse of sprite 2
lea    68(a1),a1    ; coordinates for next reuse of sprite 3
dbra    d7,loop23 ; loop
rts

; This routine moves sprites 4 and 5, which are attached, so they must
; have the same coordinates.

MoveSprites_45:
lea	Sprite4,a0    ; address of sprite 4
lea    Sprite5,a1    ; address of sprite 5
moveq    #11-1,d7    ; number of times the sprite is used
loop45:
addq.b    #2,1(a0)    ; move sprite 4 4 pixels to the right
addq.b    #2,1(a1)    ; move sprite 5 4 pixels to the right
lea    68(a0),a0    ; coordinates for next reuse of sprite 4
lea    68(a1),a1    ; coordinates for next reuse of sprite 5
dbra    d7,loop45 ; loop
rts

; This routine moves sprites 4 and 5, which are attached, so they must
; have the same coordinates.

MoveSprites_67:
lea	Sprite6,a0    ; address of sprite 6
lea    Sprite7,a1    ; address of sprite 7
moveq    #11-1,d7    ; number of uses of the sprite
loop67:
addq.b    #1,1(a0)    ; move sprite 6 2 pixels to the right
addq.b    #1,1(a1)    ; move sprite 7 2 pixels to the right
lea    68(a0),a0    ; coordinates for next reuse of sprite 6
lea    68(a1),a1    ; coordinates for next reuse of sprite 7
dbra    d7,loop67 ; loop
rts


SECTION    GRAPHIC,DATA_C

COPPERLIST:
SpritePointers:
dc.w    $120,0,$122,0,$124,0,$126,0,$128,0 ; SPRITE
dc.w	$12a,0,$12c,0,$12e,0,$130,0,$132,0
dc.w	$134,0,$136,0,$138,0,$13a,0,$13c,0
dc.w	$13e,0

dc.w    $8E,$2c81    ; DiwStrt
dc.w    $90,$2cc1    ; DiwStop

dc.w    $92,$38        ; DdfStart
dc.w    $94,$d0        ; DdfStop
dc.w    $102,0        ; BplCon1
dc.w	$104,0        ; BplCon2
dc.w    $108,0        ; Bpl1Mod
dc.w    $10a,0        ; Bpl2Mod

; 5432109876543210
dc.w    $100,%0001001000000000

BPLPOINTERS:
dc.w $e0,0,$e2,0    ;first     bitplane

dc.w    $180,$000    ; colour0    ; black background
dc.w    $182,$000    ; colour1    ; colour 1 of the bitplane, which
; in this case is empty,
; so it does not appear.

dc.w    $1a0,$000,$1a2,$fff    ; sprite palette
dc.w    $1a4,$f00,$1a6,$b00
dc.w    $1a8,$600,$1aa,$F40
dc.w    $1ac,$F80,$1ae,$Fa0
dc.w    $1b0,$Ff0,$1b2,$00f
dc.w    $1b4,$04f,$1b6,$08f
dc.w    $1b8,$0ff,$1ba,$0f0
dc.w	$1bc,$283,$1be,$f0f


dc.w    $FFFF,$FFFE    ; End of copperlist

; Here are the sprites. Each sprite is reused 11 times.
; Odd sprites have the ATTACHED bit set to form
; 16-colour sprites. As you can see, the ‘balls’ are all the same.

Sprite0:
dc.w $38D0,$4800    ; control words
dc.w    $0000,$0000,$0200,$0200,$0db0,$0d80,$1520,$1318 ; ball
dc.w	$2e30,$3208,$3e70,$260c,$3464,$2c1c,$70e0,$7018
dc.w	$20c8,$2038,$01c0,$0030,$0390,$0070,$0720,$00e0
dc.w	$0e40,$01c0,$0000,$0700,$0000,$0000,$0000,$0000

dc.w    $4943,$5900    ; control words
dc.w    $0000,$0000,$0200,$0200,$0db0,$0d80,$1520,$1318 ; ball
dc.w	$2e30,$3208,$3e70,$260c,$3464,$2c1c,$70e0,$7018
dc.w	$20c8,$2038,$01c0,$0030,$0390,$0070,$0720,$00e0
dc.w	$0e40,$01c0,$0000,$0700,$0000,$0000,$0000,$0000

dc.w	$6087,$7000
dc.w	$0000,$0000,$0200,$0200,$0db0,$0d80,$1520,$1318
dc.w	$2e30,$3208,$3e70,$260c,$3464,$2c1c,$70e0,$7018
dc.w	$20c8,$2038,$01c0,$0030,$0390,$0070,$0720,$00e0
dc.w	$0e40,$01c0,$0000,$0700,$0000,$0000,$0000,$0000

dc.w $71af,$8100
dc.w	$0000,$0000,$0200,$0200,$0db0,$0d80,$1520,$1318
dc.w	$2e30,$3208,$3e70,$260c,$3464,$2c1c,$70e0,$7018
dc.w	$20c8,$2038,$01c0,$0030,$0390,$0070,$0720,$00e0
dc.w	$0e40,$01c0,$0000,$0700,$0000,$0000,$0000,$0000

dc.w $8213,$9200
dc.w	$0000,$0000,$0200,$0200,$0db0,$0d80,$1520,$1318
dc.w	$2e30,$3208,$3e70,$260c,$3464,$2c1c,$70e0,$7018
dc.w	$20c8,$2038,$01c0,$0030,$0390,$0070,$0720,$00e0
dc.w	$0e40,$01c0,$0000,$0700,$0000,$0000,$0000,$0000

dc.w $93D0,$a300
dc.w	$0000,$0000,$0200,$0200,$0db0,$0d80,$1520,$1318
dc.w	$2e30,$3208,$3e70,$260c,$3464,$2c1c,$70e0,$7018
dc.w	$20c8,$2038,$01c0,$0030,$0390,$0070,$0720,$00e0
dc.w	$0e40,$01c0,$0000,$0700,$0000,$0000,$0000,$0000

dc.w	$a443,$b400
dc.w	$0000,$0000,$0200,$0200,$0db0,$0d80,$1520,$1318
dc.w	$2e30,$3208,$3e70,$260c,$3464,$2c1c,$70e0,$7018
dc.w	$20c8,$2038,$01c0,$0030,$0390,$0070,$0720,$00e0
dc.w	$0e40,$01c0,$0000,$0700,$0000,$0000,$0000,$0000

dc.w	$b587,$c500
dc.w	$0000,$0000,$0200,$0200,$0db0,$0d80,$1520,$1318
dc.w	$2e30,$3208,$3e70,$260c,$3464,$2c1c,$70e0,$7018
dc.w	$20c8,$2038,$01c0,$0030,$0390,$0070,$0720,$00e0
dc.w	$0e40,$01c0,$0000,$0700,$0000,$0000,$0000,$0000

dc.w $c6af,$d600
dc.w	$0000,$0000,$0200,$0200,$0db0,$0d80,$1520,$1318
dc.w	$2e30,$3208,$3e70,$260c,$3464,$2c1c,$70e0,$7018
dc.w	$20c8,$2038,$01c0,$0030,$0390,$0070,$0720,$00e0
dc.w	$0e40,$01c0,$0000,$0700,$0000,$0000,$0000,$0000

dc.w $d713,$e700
dc.w	$0000,$0000,$0200,$0200,$0db0,$0d80,$1520,$1318
dc.w	$2e30,$3208,$3e70,$260c,$3464,$2c1c,$70e0,$7018
dc.w	$20c8,$2038,$01c0,$0030,$0390,$0070,$0720,$00e0
dc.w	$0e40,$01c0,$0000,$0700,$0000,$0000,$0000,$0000

dc.w $e8b9,$f800
dc.w	$0000,$0000,$0200,$0200,$0db0,$0d80,$1520,$1318
dc.w	$2e30,$3208,$3e70,$260c,$3464,$2c1c,$70e0,$7018
dc.w	$20c8,$2038,$01c0,$0030,$0390,$0070,$0720,$00e0
dc.w    $0e40,$01c0,$0000,$0700,$0000,$0000,$0000,$0000
dc.w    0,0    ; end sprite0

Sprite1:
dc.w $38D0,$4880    ; control words
dc.w	$07c0,$0000,$1df8,$0000,$3278,$0000,$68fc,$0000 ;pallina
dc.w	$41fc,$0000,$c1fe,$0000,$c3fe,$0000,$8ffa,$0004
dc.w    $dffa,$0004,$fff2,$000c,$7ff4,$0008,$7fe4,$0018
dc.w	$3fc8,$0030,$1f30,$00c0,$07c0,$0000,$0000,$0000

dc.w	$4943,$5980	; words di controllo
dc.w	$07c0,$0000,$1df8,$0000,$3278,$0000,$68fc,$0000 ; pallina
dc.w	$41fc,$0000,$c1fe,$0000,$c3fe,$0000,$8ffa,$0004
dc.w	$dffa,$0004,$fff2,$000c,$7ff4,$0008,$7fe4,$0018
dc.w	$3fc8,$0030,$1f30,$00c0,$07c0,$0000,$0000,$0000

dc.w	$6087,$7080
dc.w	$07c0,$0000,$1df8,$0000,$3278,$0000,$68fc,$0000
dc.w	$41fc,$0000,$c1fe,$0000,$c3fe,$0000,$8ffa,$0004
dc.w	$dffa,$0004,$fff2,$000c,$7ff4,$0008,$7fe4,$0018
dc.w	$3fc8,$0030,$1f30,$00c0,$07c0,$0000,$0000,$0000

dc.w $71af,$8180
dc.w	$07c0,$0000,$1df8,$0000,$3278,$0000,$68fc,$0000
dc.w	$41fc,$0000,$c1fe,$0000,$c3fe,$0000,$8ffa,$0004
dc.w	$dffa,$0004,$fff2,$000c,$7ff4,$0008,$7fe4,$0018
dc.w	$3fc8,$0030,$1f30,$00c0,$07c0,$0000,$0000,$0000

dc.w $8213,$9280
dc.w	$07c0,$0000,$1df8,$0000,$3278,$0000,$68fc,$0000
dc.w	$41fc,$0000,$c1fe,$0000,$c3fe,$0000,$8ffa,$0004
dc.w	$dffa,$0004,$fff2,$000c,$7ff4,$0008,$7fe4,$0018
dc.w	$3fc8,$0030,$1f30,$00c0,$07c0,$0000,$0000,$0000

dc.w $93D0,$a380
dc.w	$07c0,$0000,$1df8,$0000,$3278,$0000,$68fc,$0000
dc.w	$41fc,$0000,$c1fe,$0000,$c3fe,$0000,$8ffa,$0004
dc.w	$dffa,$0004,$fff2,$000c,$7ff4,$0008,$7fe4,$0018
dc.w	$3fc8,$0030,$1f30,$00c0,$07c0,$0000,$0000,$0000

dc.w	$a443,$b480
dc.w	$07c0,$0000,$1df8,$0000,$3278,$0000,$68fc,$0000
dc.w	$41fc,$0000,$c1fe,$0000,$c3fe,$0000,$8ffa,$0004
dc.w	$dffa,$0004,$fff2,$000c,$7ff4,$0008,$7fe4,$0018
dc.w	$3fc8,$0030,$1f30,$00c0,$07c0,$0000,$0000,$0000

dc.w	$b587,$c580
dc.w	$07c0,$0000,$1df8,$0000,$3278,$0000,$68fc,$0000
dc.w	$41fc,$0000,$c1fe,$0000,$c3fe,$0000,$8ffa,$0004
dc.w	$dffa,$0004,$fff2,$000c,$7ff4,$0008,$7fe4,$0018
dc.w	$3fc8,$0030,$1f30,$00c0,$07c0,$0000,$0000,$0000

dc.w $c6af,$d680
dc.w	$07c0,$0000,$1df8,$0000,$3278,$0000,$68fc,$0000
dc.w	$41fc,$0000,$c1fe,$0000,$c3fe,$0000,$8ffa,$0004
dc.w    $dffa,$0004,$fff2,$000c,$7ff4,$0008,$7fe4,$0018
dc.w	$3fc8,$0030,$1f30,$00c0,$07c0,$0000,$0000,$0000

dc.w $d713,$e780
dc.w	$07c0,$0000,$1df8,$0000,$3278,$0000,$68fc,$0000
dc.w	$41fc,$0000,$c1fe,$0000,$c3fe,$0000,$8ffa,$0004
dc.w	$dffa,$0004,$fff2,$000c,$7ff4,$0008,$7fe4,$0018
dc.w	$3fc8,$0030,$1f30,$00c0,$07c0,$0000,$0000,$0000

dc.w $e8b9,$f880
dc.w	$07c0,$0000,$1df8,$0000,$3278,$0000,$68fc,$0000
dc.w	$41fc,$0000,$c1fe,$0000,$c3fe,$0000,$8ffa,$0004
dc.w	$dffa,$0004,$fff2,$000c,$7ff4,$0008,$7fe4,$0018
dc.w	$3fc8,$0030,$1f30,$00c0,$07c0,$0000,$0000,$0000
dc.w    0,0 ; end sprite 1

Sprite2:
dc.w $44D0,$5400    ; control words
dc.w    $0000,$0000,$0200,$0200,$0db0,$0d80,$1520,$1318 ; ball
dc.w	$2e30,$3208,$3e70,$260c,$3464,$2c1c,$70e0,$7018
dc.w	$20c8,$2038,$01c0,$0030,$0390,$0070,$0720,$00e0
dc.w	$0e40,$01c0,$0000,$0700,$0000,$0000,$0000,$0000

dc.w	$5543,$6500	; words di controllo
dc.w	$0000,$0000,$0200,$0200,$0db0,$0d80,$1520,$1318 ; pallina
dc.w	$2e30,$3208,$3e70,$260c,$3464,$2c1c,$70e0,$7018
dc.w	$20c8,$2038,$01c0,$0030,$0390,$0070,$0720,$00e0
dc.w	$0e40,$01c0,$0000,$0700,$0000,$0000,$0000,$0000

dc.w	$6687,$7600
dc.w	$0000,$0000,$0200,$0200,$0db0,$0d80,$1520,$1318
dc.w	$2e30,$3208,$3e70,$260c,$3464,$2c1c,$70e0,$7018
dc.w	$20c8,$2038,$01c0,$0030,$0390,$0070,$0720,$00e0
dc.w	$0e40,$01c0,$0000,$0700,$0000,$0000,$0000,$0000

dc.w $77af,$8700
dc.w	$0000,$0000,$0200,$0200,$0db0,$0d80,$1520,$1318
dc.w	$2e30,$3208,$3e70,$260c,$3464,$2c1c,$70e0,$7018
dc.w	$20c8,$2038,$01c0,$0030,$0390,$0070,$0720,$00e0
dc.w	$0e40,$01c0,$0000,$0700,$0000,$0000,$0000,$0000

dc.w $8813,$9800
dc.w	$0000,$0000,$0200,$0200,$0db0,$0d80,$1520,$1318
dc.w	$2e30,$3208,$3e70,$260c,$3464,$2c1c,$70e0,$7018
dc.w	$20c8,$2038,$01c0,$0030,$0390,$0070,$0720,$00e0
dc.w	$0e40,$01c0,$0000,$0700,$0000,$0000,$0000,$0000

dc.w $99D0,$a900
dc.w	$0000,$0000,$0200,$0200,$0db0,$0d80,$1520,$1318
dc.w	$2e30,$3208,$3e70,$260c,$3464,$2c1c,$70e0,$7018
dc.w	$20c8,$2038,$01c0,$0030,$0390,$0070,$0720,$00e0
dc.w	$0e40,$01c0,$0000,$0700,$0000,$0000,$0000,$0000

dc.w	$aa43,$ba00
dc.w	$0000,$0000,$0200,$0200,$0db0,$0d80,$1520,$1318
dc.w	$2e30,$3208,$3e70,$260c,$3464,$2c1c,$70e0,$7018
dc.w	$20c8,$2038,$01c0,$0030,$0390,$0070,$0720,$00e0
dc.w	$0e40,$01c0,$0000,$0700,$0000,$0000,$0000,$0000

dc.w	$bb87,$cb00
dc.w	$0000,$0000,$0200,$0200,$0db0,$0d80,$1520,$1318
dc.w	$2e30,$3208,$3e70,$260c,$3464,$2c1c,$70e0,$7018
dc.w	$20c8,$2038,$01c0,$0030,$0390,$0070,$0720,$00e0
dc.w	$0e40,$01c0,$0000,$0700,$0000,$0000,$0000,$0000

dc.w $ccaf,$dc00
dc.w	$0000,$0000,$0200,$0200,$0db0,$0d80,$1520,$1318
dc.w	$2e30,$3208,$3e70,$260c,$3464,$2c1c,$70e0,$7018
dc.w	$20c8,$2038,$01c0,$0030,$0390,$0070,$0720,$00e0
dc.w	$0e40,$01c0,$0000,$0700,$0000,$0000,$0000,$0000

dc.w $dd13,$ed00
dc.w	$0000,$0000,$0200,$0200,$0db0,$0d80,$1520,$1318
dc.w	$2e30,$3208,$3e70,$260c,$3464,$2c1c,$70e0,$7018
dc.w	$20c8,$2038,$01c0,$0030,$0390,$0070,$0720,$00e0
dc.w	$0e40,$01c0,$0000,$0700,$0000,$0000,$0000,$0000

dc.w $ee5c,$fe00
dc.w	$0000,$0000,$0200,$0200,$0db0,$0d80,$1520,$1318
dc.w	$2e30,$3208,$3e70,$260c,$3464,$2c1c,$70e0,$7018
dc.w	$20c8,$2038,$01c0,$0030,$0390,$0070,$0720,$00e0
dc.w	$0e40,$01c0,$0000,$0700,$0000,$0000,$0000,$0000
dc.w    0,0    ; end sprite 2

Sprite3:
dc.w $44D0,$5480    ; control words
dc.w	$07c0,$0000,$1df8,$0000,$3278,$0000,$68fc,$0000 ; pallina
dc.w	$41fc,$0000,$c1fe,$0000,$c3fe,$0000,$8ffa,$0004
dc.w	$dffa,$0004,$fff2,$000c,$7ff4,$0008,$7fe4,$0018
dc.w	$3fc8,$0030,$1f30,$00c0,$07c0,$0000,$0000,$0000

dc.w    $5543,$6580    ; control words
dc.w    $07c0,$0000,$1df8,$0000,$3278,$0000,$68fc,$0000 ; ball
dc.w    $41fc,$0000,$c1fe,$0000,$c3fe,$0000,$8ffa,$0004
dc.w	$dffa,$0004,$fff2,$000c,$7ff4,$0008,$7fe4,$0018
dc.w	$3fc8,$0030,$1f30,$00c0,$07c0,$0000,$0000,$0000

dc.w	$6687,$7680
dc.w	$07c0,$0000,$1df8,$0000,$3278,$0000,$68fc,$0000
dc.w	$41fc,$0000,$c1fe,$0000,$c3fe,$0000,$8ffa,$0004
dc.w	$dffa,$0004,$fff2,$000c,$7ff4,$0008,$7fe4,$0018
dc.w	$3fc8,$0030,$1f30,$00c0,$07c0,$0000,$0000,$0000

dc.w $77af,$8780
dc.w	$07c0,$0000,$1df8,$0000,$3278,$0000,$68fc,$0000
dc.w	$41fc,$0000,$c1fe,$0000,$c3fe,$0000,$8ffa,$0004
dc.w    $dffa,$0004,$fff2,$000c,$7ff4,$0008,$7fe4,$0018
dc.w	$3fc8,$0030,$1f30,$00c0,$07c0,$0000,$0000,$0000

dc.w $8813,$9880
dc.w	$07c0,$0000,$1df8,$0000,$3278,$0000,$68fc,$0000
dc.w	$41fc,$0000,$c1fe,$0000,$c3fe,$0000,$8ffa,$0004
dc.w	$dffa,$0004,$fff2,$000c,$7ff4,$0008,$7fe4,$0018
dc.w	$3fc8,$0030,$1f30,$00c0,$07c0,$0000,$0000,$0000

dc.w $99D0,$a980
dc.w	$07c0,$0000,$1df8,$0000,$3278,$0000,$68fc,$0000
dc.w	$41fc,$0000,$c1fe,$0000,$c3fe,$0000,$8ffa,$0004
dc.w	$dffa,$0004,$fff2,$000c,$7ff4,$0008,$7fe4,$0018
dc.w	$3fc8,$0030,$1f30,$00c0,$07c0,$0000,$0000,$0000

dc.w	$aa43,$ba80
dc.w	$07c0,$0000,$1df8,$0000,$3278,$0000,$68fc,$0000
dc.w	$41fc,$0000,$c1fe,$0000,$c3fe,$0000,$8ffa,$0004
dc.w	$dffa,$0004,$fff2,$000c,$7ff4,$0008,$7fe4,$0018
dc.w	$3fc8,$0030,$1f30,$00c0,$07c0,$0000,$0000,$0000

dc.w	$bb87,$cb80
dc.w	$07c0,$0000,$1df8,$0000,$3278,$0000,$68fc,$0000
dc.w	$41fc,$0000,$c1fe,$0000,$c3fe,$0000,$8ffa,$0004
dc.w	$dffa,$0004,$fff2,$000c,$7ff4,$0008,$7fe4,$0018
dc.w	$3fc8,$0030,$1f30,$00c0,$07c0,$0000,$0000,$0000

dc.w $ccaf,$dc80
dc.w	$07c0,$0000,$1df8,$0000,$3278,$0000,$68fc,$0000
dc.w	$41fc,$0000,$c1fe,$0000,$c3fe,$0000,$8ffa,$0004
dc.w	$dffa,$0004,$fff2,$000c,$7ff4,$0008,$7fe4,$0018
dc.w	$3fc8,$0030,$1f30,$00c0,$07c0,$0000,$0000,$0000

dc.w $dd13,$ed80
dc.w	$07c0,$0000,$1df8,$0000,$3278,$0000,$68fc,$0000
dc.w	$41fc,$0000,$c1fe,$0000,$c3fe,$0000,$8ffa,$0004
dc.w	$dffa,$0004,$fff2,$000c,$7ff4,$0008,$7fe4,$0018
dc.w	$3fc8,$0030,$1f30,$00c0,$07c0,$0000,$0000,$0000

dc.w $ee5c,$fe80
dc.w	$07c0,$0000,$1df8,$0000,$3278,$0000,$68fc,$0000
dc.w	$41fc,$0000,$c1fe,$0000,$c3fe,$0000,$8ffa,$0004
dc.w	$dffa,$0004,$fff2,$000c,$7ff4,$0008,$7fe4,$0018
dc.w	$3fc8,$0030,$1f30,$00c0,$07c0,$0000,$0000,$0000
dc.w	0,0    ; end sprite 3

Sprite4:
dc.w $3877,$4800    ; control words
dc.w    $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000 ; ball
dc.w	$0540,$0700,$0e60,$0980,$3cc0,$3220,$1a90,$1670
dc.w	$0490,$1c70,$19a0,$1860,$0320,$00e0,$0640,$01c0
dc.w	$0080,$0380,$0000,$0000,$0000,$0000,$0000,$0000
	

dc.w $49D0,$5900    ; control words
dc.w    $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000 ; pallina
dc.w	$0540,$0700,$0e60,$0980,$3cc0,$3220,$1a90,$1670
dc.w	$0490,$1c70,$19a0,$1860,$0320,$00e0,$0640,$01c0
dc.w	$0080,$0380,$0000,$0000,$0000,$0000,$0000,$0000

dc.w	$6043,$7000
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dc.w	$0540,$0700,$0e60,$0980,$3cc0,$3220,$1a90,$1670
dc.w	$0490,$1c70,$19a0,$1860,$0320,$00e0,$0640,$01c0
dc.w	$0080,$0380,$0000,$0000,$0000,$0000,$0000,$0000

dc.w	$7187,$8100
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dc.w	$0540,$0700,$0e60,$0980,$3cc0,$3220,$1a90,$1670
dc.w	$0490,$1c70,$19a0,$1860,$0320,$00e0,$0640,$01c0
dc.w	$0080,$0380,$0000,$0000,$0000,$0000,$0000,$0000
	

dc.w $82af,$9200
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dc.w	$0540,$0700,$0e60,$0980,$3cc0,$3220,$1a90,$1670
dc.w	$0490,$1c70,$19a0,$1860,$0320,$00e0,$0640,$01c0
dc.w	$0080,$0380,$0000,$0000,$0000,$0000,$0000,$0000
	

dc.w $9313,$a300
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dc.w	$0540,$0700,$0e60,$0980,$3cc0,$3220,$1a90,$1670
dc.w	$0490,$1c70,$19a0,$1860,$0320,$00e0,$0640,$01c0
dc.w	$0080,$0380,$0000,$0000,$0000,$0000,$0000,$0000	

dc.w $a4D0,$b400
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dc.w	$0540,$0700,$0e60,$0980,$3cc0,$3220,$1a90,$1670
dc.w	$0490,$1c70,$19a0,$1860,$0320,$00e0,$0640,$01c0
dc.w	$0080,$0380,$0000,$0000,$0000,$0000,$0000,$0000	

dc.w	$b543,$c500
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dc.w	$0540,$0700,$0e60,$0980,$3cc0,$3220,$1a90,$1670
dc.w	$0490,$1c70,$19a0,$1860,$0320,$00e0,$0640,$01c0
dc.w	$0080,$0380,$0000,$0000,$0000,$0000,$0000,$0000	

dc.w	$c687,$d600
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dc.w	$0540,$0700,$0e60,$0980,$3cc0,$3220,$1a90,$1670
dc.w	$0490,$1c70,$19a0,$1860,$0320,$00e0,$0640,$01c0
dc.w	$0080,$0380,$0000,$0000,$0000,$0000,$0000,$0000
	

dc.w $d7af,$e700
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dc.w	$0540,$0700,$0e60,$0980,$3cc0,$3220,$1a90,$1670
dc.w	$0490,$1c70,$19a0,$1860,$0320,$00e0,$0640,$01c0
dc.w	$0080,$0380,$0000,$0000,$0000,$0000,$0000,$0000
	

dc.w $e813,$f800
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dc.w	$0540,$0700,$0e60,$0980,$3cc0,$3220,$1a90,$1670
dc.w	$0490,$1c70,$19a0,$1860,$0320,$00e0,$0640,$01c0
dc.w	$0080,$0380,$0000,$0000,$0000,$0000,$0000,$0000
	
dc.w    0,0    ; end sprite 4

Sprite5:
dc.w $3877,$4880    ; control words
dc.w    $0000,$0000,$0000,$0000,$0000,$0000,$07c0,$0000 ; ball
dc.w	$08e0,$0000,$1070,$0000,$01f8,$0000,$21f8,$0000
dc.w	$23f8,$0000,$27e8,$0010,$3fe8,$0010,$1fd0,$0020
dc.w    $0fa0,$0040,$07c0,$0000,$0000,$0000,$0000,$0000

dc.w $49D0,$5980    ; control words
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$07c0,$0000 ; pallina
dc.w	$08e0,$0000,$1070,$0000,$01f8,$0000,$21f8,$0000
dc.w	$23f8,$0000,$27e8,$0010,$3fe8,$0010,$1fd0,$0020
dc.w	$0fa0,$0040,$07c0,$0000,$0000,$0000,$0000,$0000

dc.w	$6043,$7080
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$07c0,$0000
dc.w	$08e0,$0000,$1070,$0000,$01f8,$0000,$21f8,$0000
dc.w	$23f8,$0000,$27e8,$0010,$3fe8,$0010,$1fd0,$0020
dc.w	$0fa0,$0040,$07c0,$0000,$0000,$0000,$0000,$0000

dc.w	$7187,$8180
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$07c0,$0000
dc.w	$08e0,$0000,$1070,$0000,$01f8,$0000,$21f8,$0000
dc.w	$23f8,$0000,$27e8,$0010,$3fe8,$0010,$1fd0,$0020
dc.w	$0fa0,$0040,$07c0,$0000,$0000,$0000,$0000,$0000

dc.w $82af,$9280
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$07c0,$0000
dc.w	$08e0,$0000,$1070,$0000,$01f8,$0000,$21f8,$0000
dc.w	$23f8,$0000,$27e8,$0010,$3fe8,$0010,$1fd0,$0020
dc.w	$0fa0,$0040,$07c0,$0000,$0000,$0000,$0000,$0000

dc.w $9313,$a380
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$07c0,$0000
dc.w	$08e0,$0000,$1070,$0000,$01f8,$0000,$21f8,$0000
dc.w	$23f8,$0000,$27e8,$0010,$3fe8,$0010,$1fd0,$0020
dc.w	$0fa0,$0040,$07c0,$0000,$0000,$0000,$0000,$0000

dc.w $a4D0,$b480
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$07c0,$0000
dc.w	$08e0,$0000,$1070,$0000,$01f8,$0000,$21f8,$0000
dc.w	$23f8,$0000,$27e8,$0010,$3fe8,$0010,$1fd0,$0020
dc.w	$0fa0,$0040,$07c0,$0000,$0000,$0000,$0000,$0000

dc.w	$b543,$c580
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$07c0,$0000
dc.w	$08e0,$0000,$1070,$0000,$01f8,$0000,$21f8,$0000
dc.w	$23f8,$0000,$27e8,$0010,$3fe8,$0010,$1fd0,$0020
dc.w	$0fa0,$0040,$07c0,$0000,$0000,$0000,$0000,$0000

dc.w	$c687,$d680
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$07c0,$0000
dc.w	$08e0,$0000,$1070,$0000,$01f8,$0000,$21f8,$0000
dc.w	$23f8,$0000,$27e8,$0010,$3fe8,$0010,$1fd0,$0020
dc.w	$0fa0,$0040,$07c0,$0000,$0000,$0000,$0000,$0000

dc.w $d7af,$e780
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$07c0,$0000
dc.w	$08e0,$0000,$1070,$0000,$01f8,$0000,$21f8,$0000
dc.w	$23f8,$0000,$27e8,$0010,$3fe8,$0010,$1fd0,$0020
dc.w	$0fa0,$0040,$07c0,$0000,$0000,$0000,$0000,$0000

dc.w $e813,$f880
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$07c0,$0000
dc.w	$08e0,$0000,$1070,$0000,$01f8,$0000,$21f8,$0000
dc.w	$23f8,$0000,$27e8,$0010,$3fe8,$0010,$1fd0,$0020
dc.w    $0fa0,$0040,$07c0,$0000,$0000,$0000,$0000,$0000
dc.w    0,0    ; end sprite 5

Sprite6:
dc.w	$4040,$5000    ; control words
dc.w    $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000 ; ball
dc.w	$0000,$0000,$03a0,$0280,$03e0,$00a0,$0340,$0320
dc.w	$0180,$0140,$0340,$00c0,$0000,$0000,$0000,$0000
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

dc.w	$5188,$6100    ; control words
dc.w    $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000 ; ball
dc.w	$0000,$0000,$03a0,$0280,$03e0,$00a0,$0340,$0320
dc.w	$0180,$0140,$0340,$00c0,$0000,$0000,$0000,$0000
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

dc.w	$6206,$7200
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dc.w	$0000,$0000,$03a0,$0280,$03e0,$00a0,$0340,$0320
dc.w	$0180,$0140,$0340,$00c0,$0000,$0000,$0000,$0000
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

dc.w	$73dd,$8300
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dc.w	$0000,$0000,$03a0,$0280,$03e0,$00a0,$0340,$0320
dc.w	$0180,$0140,$0340,$00c0,$0000,$0000,$0000,$0000
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

dc.w	$8469,$9400
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dc.w	$0000,$0000,$03a0,$0280,$03e0,$00a0,$0340,$0320
dc.w	$0180,$0140,$0340,$00c0,$0000,$0000,$0000,$0000
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

dc.w	$95e4,$a500
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dc.w	$0000,$0000,$03a0,$0280,$03e0,$00a0,$0340,$0320
dc.w	$0180,$0140,$0340,$00c0,$0000,$0000,$0000,$0000
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

dc.w	$a62c,$b600
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dc.w	$0000,$0000,$03a0,$0280,$03e0,$00a0,$0340,$0320
dc.w	$0180,$0140,$0340,$00c0,$0000,$0000,$0000,$0000
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

dc.w	$b799,$c700
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dc.w	$0000,$0000,$03a0,$0280,$03e0,$00a0,$0340,$0320
dc.w	$0180,$0140,$0340,$00c0,$0000,$0000,$0000,$0000
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

dc.w	$c8d0,$d800
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dc.w	$0000,$0000,$03a0,$0280,$03e0,$00a0,$0340,$0320
dc.w	$0180,$0140,$0340,$00c0,$0000,$0000,$0000,$0000
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

dc.w	$d955,$e900
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dc.w	$0000,$0000,$03a0,$0280,$03e0,$00a0,$0340,$0320
dc.w	$0180,$0140,$0340,$00c0,$0000,$0000,$0000,$0000
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

dc.w	$eab4,$fa00
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dc.w	$0000,$0000,$03a0,$0280,$03e0,$00a0,$0340,$0320
dc.w	$0180,$0140,$0340,$00c0,$0000,$0000,$0000,$0000
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dc.w	0,0

Sprite7:
dc.w    $4040,$5080    ; control words
dc.w    $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000 ; ball
dc.w	$01c0,$0000,$0060,$0000,$0470,$0000,$04f0,$0000
dc.w	$06d0,$0020,$03e0,$0000,$01c0,$0000,$0000,$0000
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

dc.w	$5188,$6180	; control words
dc.w    $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000 ; ball
dc.w	$01c0,$0000,$0060,$0000,$0470,$0000,$04f0,$0000
dc.w	$06d0,$0020,$03e0,$0000,$01c0,$0000,$0000,$0000
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

dc.w	$6206,$7280
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dc.w	$01c0,$0000,$0060,$0000,$0470,$0000,$04f0,$0000
dc.w	$06d0,$0020,$03e0,$0000,$01c0,$0000,$0000,$0000
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

dc.w	$73dd,$8380
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dc.w	$01c0,$0000,$0060,$0000,$0470,$0000,$04f0,$0000
dc.w	$06d0,$0020,$03e0,$0000,$01c0,$0000,$0000,$0000
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

dc.w	$8469,$9480
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dc.w	$01c0,$0000,$0060,$0000,$0470,$0000,$04f0,$0000
dc.w	$06d0,$0020,$03e0,$0000,$01c0,$0000,$0000,$0000
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

dc.w	$95e4,$a580
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dc.w	$01c0,$0000,$0060,$0000,$0470,$0000,$04f0,$0000
dc.w	$06d0,$0020,$03e0,$0000,$01c0,$0000,$0000,$0000
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

dc.w	$a62c,$b680
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dc.w	$01c0,$0000,$0060,$0000,$0470,$0000,$04f0,$0000
dc.w	$06d0,$0020,$03e0,$0000,$01c0,$0000,$0000,$0000
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

dc.w	$b799,$c780
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dc.w	$01c0,$0000,$0060,$0000,$0470,$0000,$04f0,$0000
dc.w	$06d0,$0020,$03e0,$0000,$01c0,$0000,$0000,$0000
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

dc.w	$c8d0,$d880
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dc.w	$01c0,$0000,$0060,$0000,$0470,$0000,$04f0,$0000
dc.w	$06d0,$0020,$03e0,$0000,$01c0,$0000,$0000,$0000
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

dc.w	$d955,$e980
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dc.w	$01c0,$0000,$0060,$0000,$0470,$0000,$04f0,$0000
dc.w	$06d0,$0020,$03e0,$0000,$01c0,$0000,$0000,$0000
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000

dc.w	$eab4,$fa80
dc.w	$0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dc.w	$01c0,$0000,$0060,$0000,$0470,$0000,$04f0,$0000
dc.w	$06d0,$0020,$03e0,$0000,$01c0,$0000,$0000,$0000
dc.w    $0000,$0000,$0000,$0000,$0000,$0000,$0000,$0000
dc.w    0,0    ; end sprite 7


SECTION    PLANEVUOTO,BSS_C
BITPLANE:
ds.b    40*256

end

In this listing, we see an improvement in the star effect.
This time, instead of stars made from a dot, we move coloured balls.
 We still use sprites, but with 16 colours, because each ball
is made up of a pair of attached sprites. Furthermore, we do not use
a single pair of attached sprites (the stars were made with a single sprite
 
), but all 4 available pairs, which allows us to 
have more sprites travelling on the same line and overlapping each other.
Each pair of sprites is reused 11 times for a total of 44 balls
on the screen.

We use a separate movement routine for each pair of sprites.
However, the four routines only differ in the speed
at which the balls move. Balls created by the same pair of sprites
have the same speed, while balls created by different pairs have
different speeds.

Otherwise, there are no differences with the star listings.
